extends layout

block content
  section#projects

  script#template(type="text/ractive")
    .row
      .columns.medium-6
        h1= __('Projects')
        | {{#projects}}
        .project
          .right
            a.button.tiny(href="/?project={{._id}}")
              i.fa.fa-dashboard
            a.button.tiny.secondary(on-click="deleteProject")
              i.fa.fa-trash-o
          h2
            a(href="/teams/{{.team}}/projects/{{._id}}") {{.name}}
          .client {{.client}}

        | {{/projects}}

        a(href="/teams/#{team._id}/clients")
          h2= __("Clients")

      .columns.medium-6
        .row
          .columns
            h1= __('New project')

        form(on-submit="createProject")
          .row
            .columns
              label= __('Project name')
              input#name(type="text" name="name" value="{{.project.name}}")
          .row
            .columns
              label= __('Client')
              select(value='{{.project.client}}' name="client")
                option(selected disabled)= __('No client')
                | {{#each clients}}
                option(value="{{._id}}") {{.name}}
                | {{/each}}
          .row
            .columns
              button= __('Save')

block javascript
  script
    | require('s7n').tracker.projects(
    != JSON.stringify(projects)
    | ,
    != JSON.stringify(clients)
    | );
